Node模块的实现大致遵循CommentJS规范，其中主要包含三个内容：
- 模块的定义：一个JS文件就是一个模块
- 模块的导出：通过module.exports对象完成，即将模块的暴露部分存储到exports对象中(exports对象为一个json对象)
- 模块的引入：通过require(path)完成，即将path对应的模块封装成一个函数，编译并执行，最后返回该模块的module.exports对象

上述过程中，最为关键的部分就是第三部分，模块的引入，具体如下
- 首先Node需要根据path找到对应的模块文件，优先从缓存中查找。
- 将找到的模块代码封装成一个单独的函数，即在模块代码前面和后面添加代码
```js
    (function(exprots,require,module,__filename__,__dirname){
        模块代码
    })
```
- 将上述代码通过VM进行编译执行

上述过程并不复杂，其理念也非常简单，但是有些关键点却是我们需要注意的。期初有一困惑，即模块通过exports暴露函数时，将函数的引用传递出去，那么在使用该模块的地方，调用该模块的函数，怎么保证该函数内使用模块里的其他变量。这一困惑是建立在“JS是一个解释型语言”，即引入模块时，由于没有调用模块内的函数，即这些函数不会被执行，只有调用时才被执行，那么怎么在调用时确定函数内使用的变量对应的引用，因为这时已经不是在模块的上下文环境了。后来跟踪源码，发现在require模块时，对模块进行了编译，这个是非常重要的，这时就豁然开朗了，因为在模块引入时，就对模块内的函数内的变量进行引用替换了，在调用模块的函数时，已经是编译过的函数。
